@startuml INFOTEC Relaciones de Entidades
!theme plain
skinparam backgroundColor #FEFEFE
skinparam class {
    BackgroundColor<<Entity>> #E1F5FE
    BackgroundColor<<Pivot>> #FFF3E0
    BorderColor #1976D2
    ArrowColor #1976D2
}

title INFOTEC - Diagrama de RelaciÃ³n de Entidades

' ============================================================================
' ENTIDADES
' ============================================================================

class Evento <<Entidad>> {
    + id: bigint CP
    --
    + titulo: varchar(255) ğŸ”
    + descripcion: text ğŸ“
    + fecha_inicio: date ğŸ”
    + fecha_fin: date ğŸ”
    + ubicacion: varchar(255)
    --
    + created_at: timestamp
    + updated_at: timestamp
    ==
    <color:blue>**Relaciones**</color>
    + asistentes(): tieneVarios
    + ponentes(): perteneceAVarios
}

class Ponente <<Entidad>> {
    + id: bigint CP
    --
    + nombre: varchar(255)
    + biografia: text ğŸ“
    + especialidad: varchar(255)
    --
    + created_at: timestamp
    + updated_at: timestamp
    ==
    <color:blue>**Relaciones**</color>
    + eventos(): perteneceAVarios
}

class Asistente <<Entidad>> {
    + id: bigint CP
    --
    + nombre: varchar(255)
    + email: varchar(255) âœ‰ï¸
    + telefono: varchar(255)
    + evento_id: bigint CF
    --
    + created_at: timestamp
    + updated_at: timestamp
    ==
    <color:blue>**Relaciones**</color>
    + evento(): pertenece A
}

class EventoPonente <<Tabla Pivote>> {
    + id: bigint CP
    --
    + evento_id: bigint CF
    + ponente_id: bigint CF
    --
    + created_at: timestamp
    + updated_at: timestamp
}

' ============================================================================
' RELACIONES
' ============================================================================

Evento ||--o{ Asistente : "1:N\n(tieneVarios/perteneceA)"
Evento ||--o{ EventoPonente : ""
EventoPonente }o--|| Ponente : ""

' ============================================================================
' ANOTACIONES DE RELACIONES
' ============================================================================

note on link : <color:green>**ELIMINACIÃ“N EN CASCADA**</color>\nCuando se elimina un evento,\ntodos los asistentes se eliminan

note on link : <color:purple>**VARIOS-A-VARIOS**</color>\nLos ponentes pueden participar\nen mÃºltiples eventos

' ============================================================================
' NOTAS DE RESTRICCIONES
' ============================================================================

note top of Evento : ğŸ¯ **Entidad Evento**\nâ€¢ Ãndices de rendimiento en campos buscables\nâ€¢ Campo TEXTO para descripciones largas\nâ€¢ ValidaciÃ³n de fechas (no eventos pasados)

note top of Ponente : ğŸ‘¨â€ğŸ« **Entidad Ponente**\nâ€¢ Puede participar en mÃºltiples eventos\nâ€¢ Soporta biografÃ­as largas

note right of Asistente : ğŸ« **Entidad Asistente**\nâ€¢ Email Ãºnico por evento\nâ€¢ ELIMINACIÃ“N EN CASCADA con evento

note bottom of EventoPonente : ğŸ”— **Tabla Pivote**\nâ€¢ Ãšnico (evento_id, ponente_id)\nâ€¢ ELIMINACIÃ“N EN CASCADA desde ambos lados

' ============================================================================
' LEYENDA
' ============================================================================

legend bottom left
    <color:blue>**Leyenda de SÃ­mbolos**</color>
    ğŸ” = Campo indexado
    ğŸ“ = Campo TEXTO (contenido largo)
    âœ‰ï¸ = Campo email (validado)
    CP = Clave Primaria
    CF = Clave ForÃ¡nea
    
    <color:green>**Tipos de Relaciones**</color>
    1:N = Uno-a-Varios
    M:N = Varios-a-Varios (vÃ­a pivote)
endlegend

@enduml